(this["webpackJsonpreact-boilerplate"]=this["webpackJsonpreact-boilerplate"]||[]).push([[0],{18:function(e,t,n){e.exports=n(43)},23:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),u=n.n(o),c=(n(23),n(1)),l=n.n(c),i=n(4),s=n(16),m=n(17),p=n(3),f=n(5),d=n.n(f),h=null,v={getAll:function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/notes");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,d.a.post("/api/notes",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h}},e.next=3,d.a.patch("".concat("/api/notes","/").concat(t),n,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteNote:function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,d.a.delete("".concat("/api/notes","/").concat(t.id),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){h="bearer ".concat(e)}},b={login:function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(e){var t=e.handleSubmit,n=e.handleUsernameChange,a=e.handlePasswordChange,o=e.username,u=e.password;return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"username",r.a.createElement("input",{value:o,onChange:n})),r.a.createElement("div",null,"password",r.a.createElement("input",{type:"password",value:u,onChange:a})),r.a.createElement("button",{type:"submit"},"login")))},E=function(e){var t=Object(a.useState)(!1),n=Object(p.a)(t,2),o=n[0],u=n[1],c={display:o?"none":""},l={display:o?"":"none"},i=function(){u(!o)};return r.a.createElement("div",null,r.a.createElement("div",{style:c},r.a.createElement("button",{onClick:i},e.buttonLabel)),r.a.createElement("div",{style:l},e.children,r.a.createElement("button",{onClick:i},"cancel")))},w=function(e){var t=e.onSubmit,n=e.handleChange,a=e.value;return r.a.createElement("div",null,r.a.createElement("h2",null,"Create a new note"),r.a.createElement("form",{onSubmit:t},r.a.createElement("input",{value:a,onChange:n}),r.a.createElement("button",{type:"submit"},"save")))},O=(n(42),function(e){var t=e.note,n=e.toggleImportance,a=e.deleteNote,o=t.important?"make not important":"make important",u=JSON.stringify(t.user.name);return r.a.createElement("li",null,"Important? ",t.important.toString(),"::: ",t.content,r.a.createElement("button",{onClick:n},o),r.a.createElement("button",{value:t.id,onClick:function(){return a(t)}},"Delete"),r.a.createElement("br",null),"Created by: ",u)}),j=function(e){var t=e.errorMessage,n=e.text,a=e.status;return null===t?null:r.a.createElement("div",{text:n,status:a,className:"error"},t.text)},k=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],o=t[1],u=Object(a.useState)(""),c=Object(p.a)(u,2),f=c[0],d=c[1],h=Object(a.useState)(!0),k=Object(p.a)(h,2),x=k[0],S=k[1],y=Object(a.useState)(null),C=Object(p.a)(y,2),N=C[0],I=C[1],T=Object(a.useState)(""),A=Object(p.a)(T,2),z=A[0],D=A[1],J=Object(a.useState)(""),U=Object(p.a)(J,2),L=U[0],P=U[1],M=Object(a.useState)(null),W=Object(p.a)(M,2),B=W[0],$=W[1],q=Object(a.useState)(!1),F=Object(p.a)(q,2);F[0],F[1];Object(a.useEffect)((function(){v.getAll().then((function(e){o(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);$(t),v.setToken(t.token)}}),[]);var G=function(e){I(e),setTimeout((function(){I(null)}),3e3)},H=x?n:n.filter((function(e){return!0===e.important})),K=function(e){e.preventDefault();var t={content:f,user:{username:B.username,name:B.name},date:(new Date).toISOString(),important:Math.random()<.5};v.create(t).then((function(e){o(n.concat(e)),d("")})).catch((function(e){G({text:e.response.data.error})}))},Q=function(e){d(e.target.value)},R=function(e){var t=n.indexOf(e),a=e.user.name,r=B.name;a===r&&(v.deleteNote(e).then((function(){I({text:"Note id: ".concat(e.id," deleted"),status:"ok"}),setTimeout((function(){I(null)}),3e3)})),n.splice(t,1),o(Object(s.a)(n))),a!==r?(I({text:"".concat(r," not authorized"),status:"ok"}),setTimeout((function(){I(null)}),3e3)):null===B&&(I({text:"Who are you?",status:"ok"}),setTimeout((function(){I(null)}),3e3))},V=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.login({username:z,password:L});case 4:n=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(n)),v.setToken(n.token),$(n),D(""),P(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),G({text:e.t0.response.data.error});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.localStorage.removeItem("loggedNoteappUser"),$(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log((function(){return!0===x?r.a.createElement("h1",null,"Notes: All Notes"):r.a.createElement("h1",null,"Notes: Important Notes")})),r.a.createElement("div",null,r.a.createElement("h1",null," NOTES APP"),r.a.createElement(j,{errorMessage:N}),null===B?r.a.createElement("div",null,r.a.createElement(E,{buttonLabel:"login"},r.a.createElement(g,{username:z,password:L,handleUsernameChange:function(e){var t=e.target;return D(t.value)},handlePasswordChange:function(e){var t=e.target;return P(t.value)},handleSubmit:V}))):r.a.createElement("div",null,r.a.createElement("p",null,B.name," is logged in"," ",r.a.createElement("button",{onClick:X},"logout")),r.a.createElement(E,{buttonLabel:"new note"},r.a.createElement(w,{onSubmit:K,value:f,handleChange:Q}))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return S(!x)}},"show ",x?"important":"all")),r.a.createElement("ul",null,H.map((function(e){return r.a.createElement(O,{key:e.id,note:e,user:e.user,toggleImportance:function(){return function(e){var t=n.find((function(t){return t.id===e})),a=t.user.name,r=B.name,u=Object(m.a)({},t,{important:!t.important});if(a!==r)return o(H),void G({text:" '".concat(r,"' is not authorized to change this note ")});v.update(e,u).then((function(){o(H.map((function(t){return t.id!==e?t:u}))),G({text:"the importance of note '".concat(t.id,"' has been changed to ").concat(u.important.toString()," ")})})).catch((function(){I({text:"the note '".concat(t.content,"' was already deleted from server")}),setTimeout((function(){I(null)}),5e3),o(n.filter((function(t){return t.id!==e})))}))}(e.id)},deleteNote:R})}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.9eb03b61.chunk.js.map